function formMethods(){$.validator.addMethod("exactLength",function(value,element,parameter){return this.optional(element)||value.length===parameter}),$.validator.addMethod("noSpace",function(value,element){return this.optional(element)||/(?=\S)/.test(value)},"Please complete the field"),$.validator.addMethod("advEmail",function(value,element){return this.optional(element)||/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(value)},"Please insert a valid email address")}function naturalisationForm(){var emailWrapper=".email-wrapper",addressWrapper=".address-wrapper",contactEmail="#contact_email",contactPostal="#contact_postal",formStepOne=".form-step-1",formStepTwo=".form-step-2",formStepThree=".form-step-3",button=".button",buttonBack=".button-back",radio='input[type="radio"]',submit='input[type="submit"]',formName="#naturalisation";$(emailWrapper).hide(),$(addressWrapper).hide(),$(formStepTwo).hide(),$(formStepThree).hide(),$(button,".form-step-1,.form-step-2").css("display","block"),$(buttonBack,".form-step-2,.form-step-3").css("display","block"),$(button).on("click",function(){var form=$(formName);formMethods(),form.validate({errorElement:"span",errorClass:"form-error form-hint",highlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').addClass("form-warning"),$(element).closest('input[type="email"]').addClass("form-warning"),$(element).closest("textarea").addClass("form-warning")},unhighlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').removeClass("form-warning"),$(element).closest('input[type="email"]').removeClass("form-warning"),$(element).closest("textarea").removeClass("form-warning")},rules:{"certificate-day":{digits:!0},"certificate-month":{digits:!0},"certificate-year":{digits:!0,exactLength:4},forename:{required:!0,noSpace:!0},surname:{required:!0,noSpace:!0},preferred_contact:{required:!0,noSpace:!0},email:{required:!0,email:!0,advEmail:!0},"confirm-email":{equalTo:"#email"},"postal-address":{required:!0,noSpace:!0},"certificate-name":{required:!0,noSpace:!0},contact_email:{required:function(element){return $("#contact-postal:checked").length<=0}},"preferred-contact":{required:function(element){return $("#contact-email:checked").length<=0}}},messages:{"certificate-day":{required:"Day",digits:"Only digits"},"certificate-month":{required:"Month",digits:"Only digits"},"certificate-year":{required:"Year",digits:"Only digits",exactLength:"Four digits"},forename:{required:"Please enter your first name"},surname:{required:"Please enter your last name"},email:"Please enter your email address","confirm-email":{required:"Please enter your email address",equalTo:"Please enter your email address again"},"postal-address":{required:"Please enter your postal address"},"certificate-name":{required:"Please enter the certificate holderâ€™s name(s)"},"preferred-contact":{required:"Please select one option"}}}),form.valid()===!0&&($(formStepOne).is(":visible")?(current_fs=$(formStepOne),next_fs=$(formStepTwo),$(".arrow-steps li:nth-child(2)").addClass("current"),$(submit).prop("disabled",!0)):$(formStepTwo).is(":visible")&&(current_fs=$(formStepTwo),next_fs=$(formStepThree),$(".arrow-steps li:nth-child(3)").addClass("current"),$(submit).prop("disabled",!1)),next_fs.show(),current_fs.hide())}),$(radio).on("click",function(){$(contactEmail).is(":checked")?($(emailWrapper).show(),$(addressWrapper).hide()):$(contactPostal).is(":checked")&&($(addressWrapper).show(),$(emailWrapper).hide())}),$(buttonBack,formStepTwo).on("click",function(){$(formStepOne).show(),$(formStepTwo).hide(),$(".arrow-steps li:nth-child(2)").removeClass("current"),$(".arrow-steps li:nth-child(3)").removeClass("current")}),$(buttonBack,formStepThree).on("click",function(){$(formStepTwo).show(),$(formStepThree).hide(),$(".arrow-steps li:nth-child(3)").removeClass("current")})}function defaultForm(){var formName="#default",form=$(formName);formMethods(),form.validate({errorElement:"span",errorClass:"form-error form-hint",highlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').addClass("form-warning"),$(element).closest('input[type="email"]').addClass("form-warning"),$(element).closest("textarea").addClass("form-warning")},unhighlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').removeClass("form-warning"),$(element).closest('input[type="email"]').removeClass("form-warning"),$(element).closest("textarea").removeClass("form-warning")},rules:{forename:{required:!0,noSpace:!0},surname:{required:!0,noSpace:!0},email:{required:!0,email:!0,advEmail:!0},"confirm-email":{equalTo:"#email"},country:{required:!0,noSpace:!0},enquiry:{required:!0,noSpace:!0}},messages:{forename:{required:"Please enter your first name"},surname:{required:"Please enter your last name"},email:"Please enter your email address","confirm-email":{required:"Please enter your email address",equalTo:"Please enter your email address again"},country:{required:"Please enter your country"},enquiry:{required:"Please enter your enquiry"}}})}function recordsResearchEnquiryForm(){var formName="#records-research-enquiry",form=$(formName);formMethods(),form.validate({errorElement:"span",errorClass:"form-error form-hint",highlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').addClass("form-warning"),$(element).closest('input[type="email"]').addClass("form-warning"),$(element).closest("textarea").addClass("form-warning")},unhighlight:function(element,errorClass,validClass){$(element).closest('input[type="text"]').removeClass("form-warning"),$(element).closest('input[type="email"]').removeClass("form-warning"),$(element).closest("textarea").removeClass("form-warning")},rules:{email:{required:!0,email:!0,advEmail:!0},"confirm-email":{equalTo:"#email"},country:{required:!0,noSpace:!0},enquiry:{required:!0,noSpace:!0}},messages:{email:"Please enter your email address","confirm-email":{required:"Please enter your email address",equalTo:"Please enter your email address again"},country:{required:"Please enter your country"},enquiry:{required:"Please enter your enquiry"}}})}!function($){$.fn.newsletterValidation=function(){if($.html5ValidationAvailable()!==!1)return this.each(function(){var $this=$(this),$email=$this.find("input[type=email]"),$submit=$this.find("input[type=submit]");$.manageState($email,$submit),$email.on("keyup change",function(){$.manageState($(this),$submit)})})},$.html5ValidationAvailable=function(){return"function"==typeof document.createElement("input").checkValidity},$.isEmail=function(str){return/^[\w.%+\-]+@[\w.\-]+\.[A-Za-z]{2,6}$/.test(str)},$.manageState=function($email,$submit){$submit.prop("disabled",!$.isEmail($email.val()))}}(jQuery),$(document).ready(function(){!function(){$("#signup").newsletterValidation(),$("#naturalisation").is(":visible")?naturalisationForm():$("#records-research-enquiry").is(":visible")?(recordsResearchEnquiryForm(),alert("My name is Records Research Enquiry")):defaultForm()}()});